NAME: eric-data-object-storage-mn
LAST DEPLOYED: Tue Jun  8 21:39:22 2021
NAMESPACE: storobj-test
STATUS: deployed
REVISION: 1
TEST SUITE: None
USER-SUPPLIED VALUES:
autoEncryption:
  enabled: false
credentials:
  kubernetesSecretName: test-secret
global:
  security:
    tls:
      enabled: false
mode: standalone
persistentVolumeClaim:
  size: 40Gi
replicas: 1
resources:
  limits:
    cpu: 4000m
    memory: 5120Mi
  requests:
    cpu: 200m
    memory: 512Mi
tls:
  enabled: true

COMPUTED VALUES:
affinity:
  podAntiAffinity: hard
autoEncryption:
  enabled: false
  kmsConfigSecret: eric-data-object-storage-mn-kms-set
brAgent:
  backupTypeList:
  - DEFAULT
  brLabelKey: adpbrlabelkey
  enabled: false
  livenessProbe:
    failureThreshold: 3
    initialDelaySeconds: 5
    periodSeconds: 10
    successThreshold: 1
  logLevel: info
  objectStorage:
    host: eric-data-object-storage-mn
    port: 9000
  properties:
    production_date: "2021-02-01"
  readinessProbe:
    failureThreshold: 60
    initialDelaySeconds: 30
    periodSeconds: 1
    successThreshold: 1
  resources:
    limits:
      cpu: "1"
      memory: 256Mi
    requests:
      cpu: 200m
      memory: 16Mi
  retryTimes: 3
  securityContext:
    runAsGroup: 0
    runAsUser: 60618
  tls:
    certName: cert.pem
    keyName: key.pem
    paths:
      clientCerts: /etc/tls/cert/client
      internalCa: /etc/tls/ca/internal
clusterDomain: cluster.local
credentials:
  kubernetesSecretName: test-secret
environment:
  MINIO_BROWSER: "off"
  MINIO_PROMETHEUS_AUTH_TYPE: public
global:
  security:
    tls:
      enabled: false
imageCredentials:
  pullPolicy: IfNotPresent
  pullSecret: ""
  registry:
    url: ""
  repoPath: proj-adp-eric-data-object-storage-mn-drop
images:
  bra:
    name: eric-data-object-storage-bra
    tag: 1.11.0-19
  init:
    name: eric-data-object-storage-mn-init
    tag: 1.11.0-19
  minio:
    name: eric-data-object-storage-mn
    tag: 1.11.0-19
keyManagement:
  hostname: eric-sec-key-management
  port: 8200
  serviceAccountNameForCredentials: eric-sec-key-management-admin
  tls:
    caCert: cacertbundle.pem
    caSecret: eric-sec-sip-tls-trusted-root-cert
  tokenKey: token
  tokenSecretName: eric-sec-key-management-root-token
lifecycle:
  configMap: lifecycle-config
  hookWeight: "-4"
  mcHost: client
metadata:
  annotations:
    prometheus.io/path: /minio/prometheus/metrics
    prometheus.io/port: "9000"
    prometheus.io/scrape: "true"
metrics:
  serviceMonitor:
    additionalLabels: {}
    enabled: false
mgt:
  livenessProbe:
    failureThreshold: 3
    initialDelaySeconds: 5
    periodSeconds: 5
    successThreshold: 1
    timeoutSeconds: 1
  readinessProbe:
    failureThreshold: 3
    initialDelaySeconds: 5
    periodSeconds: 5
    successThreshold: 1
    timeoutSeconds: 1
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi
  securityContext:
    runAsGroup: 0
    runAsUser: 32499
mode: standalone
mountPath: /export
networkPolicy:
  allowExternal: true
  enabled: false
nodeSelector: {}
objects_lifecycle_cfg: ""
persistentVolumeClaim:
  size: 40Gi
  storageClassName: ""
  storageConnectivity: networked
  subPath: ""
  volumeNamePrefix: export
priorityClassName: ""
productInfo:
  rstate: R12A
replicas: 1
resources:
  limits:
    cpu: 4000m
    memory: 5120Mi
  requests:
    cpu: 200m
    memory: 512Mi
server:
  livenessProbe:
    failureThreshold: 3
    initialDelaySeconds: 30
    periodSeconds: 5
    successThreshold: 1
    timeoutSeconds: 1
  readinessProbe:
    failureThreshold: 3
    initialDelaySeconds: 60
    periodSeconds: 15
    successThreshold: 1
    timeoutSeconds: 1
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi
  securityContext:
    runAsGroup: 0
    runAsUser: 58325
service:
  annotations: {}
  port: 9000
  type: ClusterIP
serviceAccount:
  create: true
  name: null
tls:
  caCert: cacertbundle.pem
  caSecret: eric-sec-sip-tls-trusted-root-cert
  certSecret: ""
  enabled: true
  privateKey: private.key
  publicCrt: public.crt
tolerations: []
updateStrategy:
  mgt:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
    type: RollingUpdate
  server:
    rollingUpdate:
      maxSurge: 25%
      maxUnavailable: 25%
      partition: 0
    type: RollingUpdate

HOOKS:
MANIFEST:
---
# Source: eric-data-object-storage-mn/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: "eric-data-object-storage-mn"
  labels:
    app.kubernetes.io/name: eric-data-object-storage-mn
    app.kubernetes.io/version: 1.11.0_19
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/instance: eric-data-object-storage-mn
    helm.sh/chart: eric-data-object-storage-mn-1.11.0_19
    app: eric-data-object-storage-mn
    chart: eric-data-object-storage-mn-1.11.0_19
    release: eric-data-object-storage-mn
    heritage: Helm
  annotations:
    ericsson.com/product-name: "Object Storage MN Helm Chart"
    ericsson.com/product-number: "CXC 174 2822"
    ericsson.com/product-revision: 1.11.0
    
    prometheus.io/path: /minio/prometheus/metrics
    prometheus.io/port: "9000"
    prometheus.io/scrape: "true"
  namespace: "storobj-test"
---
# Source: eric-data-object-storage-mn/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: eric-data-object-storage-mn-kms-config
  labels:
    app.kubernetes.io/name: eric-data-object-storage-mn
    app.kubernetes.io/version: 1.11.0_19
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/instance: eric-data-object-storage-mn
    helm.sh/chart: eric-data-object-storage-mn-1.11.0_19
    app: eric-data-object-storage-mn
    chart: eric-data-object-storage-mn-1.11.0_19
    release: eric-data-object-storage-mn
    heritage: Helm
  annotations:
    ericsson.com/product-name: "Object Storage MN Helm Chart"
    ericsson.com/product-number: "CXC 174 2822"
    ericsson.com/product-revision: 1.11.0
    
    prometheus.io/path: /minio/prometheus/metrics
    prometheus.io/port: "9000"
    prometheus.io/scrape: "true"
data:
  config.json: |
    {
      "kms": {
        "dns": "eric-sec-key-management",
        "port": "8200",
        "namespace": "storobj-test",
        "root_token_secret": "eric-sec-key-management-root-token",
        "root_token_key": "token",
        "credentials_service_account_name": "eric-sec-key-management-admin",
        "credentials_role_name": "service-credentials",
        "kv_secret_path": "secret-v2"
      },
      "siptls": {
        "ca_secret": "eric-sec-sip-tls-trusted-root-cert",
        "ca_cert_key": "cacertbundle.pem",
        "namespace": "storobj-test"
      },
      "obj_storage": {
        "tls_enable": false,
        "data_encryption": false,
        "config_kms_secret": "eric-data-object-storage-mn-kms-set",
        "role_key": "role_id",
        "secret_key": "secret_id",
        "auth_path": "approle",
        "role_name": "my-role",
        "policy_name": "minio-policy",
        "transit_name": "my-minio-key",
        "transit_path": "transit",
        "credentials_service_account_name": "eric-data-object-storage-mn",
        "namespace": "storobj-test"
      }
    }
---
# Source: eric-data-object-storage-mn/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: eric-data-object-storage-mn-role
  labels:
    app.kubernetes.io/name: eric-data-object-storage-mn
    app.kubernetes.io/version: 1.11.0_19
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/instance: eric-data-object-storage-mn
    helm.sh/chart: eric-data-object-storage-mn-1.11.0_19
    app: eric-data-object-storage-mn
    chart: eric-data-object-storage-mn-1.11.0_19
    release: eric-data-object-storage-mn
    heritage: Helm
  annotations:
    ericsson.com/product-name: "Object Storage MN Helm Chart"
    ericsson.com/product-number: "CXC 174 2822"
    ericsson.com/product-revision: 1.11.0
    
    prometheus.io/path: /minio/prometheus/metrics
    prometheus.io/port: "9000"
    prometheus.io/scrape: "true"
  namespace: "storobj-test"
rules:
  - apiGroups: [""] # "" indicates the core API group
    resources: ["secrets"]
    verbs: ["create"]

  - apiGroups: [""] # "" indicates the core API group
    resources: ["secrets"]
    resourceNames: ["eric-data-object-storage-mn-kms-set"]
    verbs: ["delete"]

  - apiGroups: [""] # "" indicates the core API group
    resources: ["secrets"]
    resourceNames: ["eric-sec-sip-tls-trusted-root-cert", "eric-data-object-storage-mn-kms-set", "eric-sec-key-management-admin-token"]
    verbs: ["get"]
---
# Source: eric-data-object-storage-mn/templates/rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: eric-data-object-storage-mn-rolebinding
  labels:
    app.kubernetes.io/name: eric-data-object-storage-mn
    app.kubernetes.io/version: 1.11.0_19
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/instance: eric-data-object-storage-mn
    helm.sh/chart: eric-data-object-storage-mn-1.11.0_19
    app: eric-data-object-storage-mn
    chart: eric-data-object-storage-mn-1.11.0_19
    release: eric-data-object-storage-mn
    heritage: Helm
  annotations:
    ericsson.com/product-name: "Object Storage MN Helm Chart"
    ericsson.com/product-number: "CXC 174 2822"
    ericsson.com/product-revision: 1.11.0
    
    prometheus.io/path: /minio/prometheus/metrics
    prometheus.io/port: "9000"
    prometheus.io/scrape: "true"
  namespace: "storobj-test"
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: eric-data-object-storage-mn-role
subjects:
- kind: ServiceAccount
  name: "eric-data-object-storage-mn"
---
# Source: eric-data-object-storage-mn/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: eric-data-object-storage-mn
  labels:
    app.kubernetes.io/name: eric-data-object-storage-mn
    app.kubernetes.io/version: 1.11.0_19
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/instance: eric-data-object-storage-mn
    helm.sh/chart: eric-data-object-storage-mn-1.11.0_19
    app: eric-data-object-storage-mn
    chart: eric-data-object-storage-mn-1.11.0_19
    release: eric-data-object-storage-mn
    heritage: Helm
  annotations:
    ericsson.com/product-name: "Object Storage MN Helm Chart"
    ericsson.com/product-number: "CXC 174 2822"
    ericsson.com/product-revision: 1.11.0
    
    prometheus.io/path: /minio/prometheus/metrics
    prometheus.io/port: "9000"
    prometheus.io/scrape: "true"
spec:
  type: "ClusterIP"
  selector:
    app.kubernetes.io/name: eric-data-object-storage-mn
    app.kubernetes.io/instance: eric-data-object-storage-mn
    app: eric-data-object-storage-mn
  ports:
    - name: service
      port: 9000
      protocol: TCP
      targetPort: 9000
---
# Source: eric-data-object-storage-mn/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: eric-data-object-storage-mn-svc
  labels:
    app.kubernetes.io/name: eric-data-object-storage-mn
    app.kubernetes.io/version: 1.11.0_19
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/instance: eric-data-object-storage-mn
    helm.sh/chart: eric-data-object-storage-mn-1.11.0_19
    app: eric-data-object-storage-mn
    chart: eric-data-object-storage-mn-1.11.0_19
    release: eric-data-object-storage-mn
    heritage: Helm
  annotations:
    ericsson.com/product-name: "Object Storage MN Helm Chart"
    ericsson.com/product-number: "CXC 174 2822"
    ericsson.com/product-revision: 1.11.0
    
    prometheus.io/path: /minio/prometheus/metrics
    prometheus.io/port: "9000"
    prometheus.io/scrape: "true"
spec:
  publishNotReadyAddresses: true
  clusterIP: None
  selector:
    app.kubernetes.io/name: eric-data-object-storage-mn
    app.kubernetes.io/instance: eric-data-object-storage-mn
    app: eric-data-object-storage-mn
  ports:
    - name: service
      port: 9000
      protocol: TCP
---
# Source: eric-data-object-storage-mn/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: eric-data-object-storage-mn-mgt
  labels:
    app.kubernetes.io/name: eric-data-object-storage-mn
    app.kubernetes.io/version: 1.11.0_19
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/instance: eric-data-object-storage-mn
    helm.sh/chart: eric-data-object-storage-mn-1.11.0_19
    app: eric-data-object-storage-mn-mgt
    chart: eric-data-object-storage-mn-1.11.0_19
    release: eric-data-object-storage-mn
    heritage: Helm
    role: management
  annotations:
    ericsson.com/product-name: "Object Storage MN Helm Chart"
    ericsson.com/product-number: "CXC 174 2822"
    ericsson.com/product-revision: 1.11.0
spec:
  strategy:
    type: "RollingUpdate"
    rollingUpdate:
      maxUnavailable: 1
      maxSurge: 1
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: eric-data-object-storage-mn
      app.kubernetes.io/instance: eric-data-object-storage-mn
      role: management
  template:
    metadata:
      labels:
        app.kubernetes.io/name: eric-data-object-storage-mn
        app.kubernetes.io/version: 1.11.0_19
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/instance: eric-data-object-storage-mn
        helm.sh/chart: eric-data-object-storage-mn-1.11.0_19
        app: eric-data-object-storage-mn-mgt
        chart: eric-data-object-storage-mn-1.11.0_19
        release: eric-data-object-storage-mn
        heritage: Helm
        role: management
      annotations:
        ericsson.com/product-name: "Object Storage MN Helm Chart"
        ericsson.com/product-number: "CXC 174 2822"
        ericsson.com/product-revision: 1.11.0
        checksum/config: 6b6db82e47cb6a94492e505bb94e7a3dbdd27aa3957f3ba791747013d878f94b
    spec:
      serviceAccountName: "eric-data-object-storage-mn"
      containers:
      - name: manager
        image: armdocker.rnd.ericsson.se/proj-adp-eric-data-object-storage-mn-drop/eric-data-object-storage-mn-init:1.11.0-19
        imagePullPolicy: IfNotPresent
        command: ["/minio/manager.sh"]
        securityContext:
          runAsUser: 32499
          runAsGroup: 0
          allowPrivilegeEscalation: false
          privileged: false
          readOnlyRootFilesystem: false
          runAsNonRoot: true
          capabilities:
            drop:
              - all
        volumeMounts:
          - name: kms-config
            mountPath: /minio/config
        env:
          - name: MINIO_ACCESS_KEY
            valueFrom:
              secretKeyRef:
                name: test-secret
                key: accesskey
          - name: MINIO_SECRET_KEY
            valueFrom:
              secretKeyRef:
                name: test-secret
                key: secretkey
          - name: TZ
            value: "UTC"
          - name: MINIO_REPLICAS
            value: "1"
          - name: STORAGE_SERVER_DNS
            value: eric-data-object-storage-mn
          - name: MC_HOST
            value: "client"
          - name: TLS_ENABLED
            value: "false"
        livenessProbe:
          exec:
            command:
            - cat
            - /minio/health
          initialDelaySeconds: 5
          periodSeconds: 5
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 3
        readinessProbe:
          exec:
            command:
            - cat
            - /minio/health
          initialDelaySeconds: 5
          periodSeconds: 5
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 3
        resources:
          limits:
            cpu: 500m
            memory: 512Mi
          requests:
            cpu: 250m
            memory: 256Mi

      volumes:
        - name: kms-config
          configMap:
            defaultMode: 0755
            name: eric-data-object-storage-mn-kms-config
---
# Source: eric-data-object-storage-mn/templates/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: eric-data-object-storage-mn
  labels:
    app.kubernetes.io/name: eric-data-object-storage-mn
    app.kubernetes.io/version: 1.11.0_19
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/instance: eric-data-object-storage-mn
    helm.sh/chart: eric-data-object-storage-mn-1.11.0_19
    app: eric-data-object-storage-mn
    chart: eric-data-object-storage-mn-1.11.0_19
    release: eric-data-object-storage-mn
    heritage: Helm
  annotations:
    ericsson.com/product-name: "Object Storage MN Helm Chart"
    ericsson.com/product-number: "CXC 174 2822"
    ericsson.com/product-revision: 1.11.0
    
    prometheus.io/path: /minio/prometheus/metrics
    prometheus.io/port: "9000"
    prometheus.io/scrape: "true"
spec:
  updateStrategy:
    type: "RollingUpdate"
    rollingUpdate:
      partition: 0
  podManagementPolicy: "Parallel"
  serviceName: eric-data-object-storage-mn-svc
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: eric-data-object-storage-mn
      app.kubernetes.io/instance: eric-data-object-storage-mn
  template:
    metadata:
      name: eric-data-object-storage-mn
      labels:
        app.kubernetes.io/name: eric-data-object-storage-mn
        app.kubernetes.io/version: 1.11.0_19
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/instance: eric-data-object-storage-mn
        helm.sh/chart: eric-data-object-storage-mn-1.11.0_19
        app: eric-data-object-storage-mn
        chart: eric-data-object-storage-mn-1.11.0_19
        release: eric-data-object-storage-mn
        heritage: Helm
      annotations:
        ericsson.com/product-name: "Object Storage MN Helm Chart"
        ericsson.com/product-number: "CXC 174 2822"
        ericsson.com/product-revision: 1.11.0
        
        prometheus.io/path: /minio/prometheus/metrics
        prometheus.io/port: "9000"
        prometheus.io/scrape: "true"
    spec:
      securityContext:
        fsGroup: 0
      serviceAccountName: "eric-data-object-storage-mn"
      containers:
        - name: eric-data-object-storage-mn
          image: armdocker.rnd.ericsson.se/proj-adp-eric-data-object-storage-mn-drop/eric-data-object-storage-mn:1.11.0-19
          imagePullPolicy: IfNotPresent
          securityContext:
            runAsUser: 58325
            runAsGroup: 0
            allowPrivilegeEscalation: false
            privileged: false
            readOnlyRootFilesystem: false
            runAsNonRoot: true
            capabilities:
              drop:
                - all
          tty: true
          # CMD for standalone mode
          command: [ "minio", "server", "--config-dir", "/minio", "--json", "--quiet", "/export" ]# CMD for distributed mode# CMD end
          volumeMounts:
            - name: export
              mountPath: /export
          ports:
            - name: service
              containerPort: 9000
          env:
            - name: TZ
              value: "UTC"
            - name: MINIO_ACCESS_KEY
              valueFrom:
                secretKeyRef:
                  name: test-secret
                  key: accesskey
            - name: MINIO_SECRET_KEY
              valueFrom:
                secretKeyRef:
                  name: test-secret
                  key: secretkey
            - name: MINIO_BROWSER
              value: "off"
            - name: MINIO_PROMETHEUS_AUTH_TYPE
              value: "public"
          livenessProbe:
            httpGet:
              path: /minio/health/live
              port: service
              scheme: HTTP
            initialDelaySeconds: 30
            periodSeconds: 5
            timeoutSeconds: 1
            successThreshold: 1
            failureThreshold: 3
          readinessProbe:
            httpGet:
              scheme: HTTP
              path: /minio/health/ready
              port: service
            initialDelaySeconds: 60
            periodSeconds: 15
            timeoutSeconds: 1
            successThreshold: 1
            failureThreshold: 3
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 250m
              memory: 256Mi
      affinity:
        podAntiAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
          - labelSelector:
              matchExpressions:
              - key: app
                operator: In
                values:
                - eric-data-object-storage-mn
            topologyKey: "kubernetes.io/hostname"
      volumes:
        - name: minio-user
          secret:
            secretName: test-secret
  volumeClaimTemplates:
    - metadata:
        name: export
      spec:
        accessModes: [ "ReadWriteOnce" ]
        resources:
          requests:
            storage: 40Gi

NOTES:
Ericsson object storage can be accessed via port 9000 on the following DNS name from within your cluster:
eric-data-object-storage-mn.storobj-test.svc.cluster.local
